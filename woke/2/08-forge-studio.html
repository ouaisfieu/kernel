<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° FORGE ‚Äî Studio de Cr√©ation Autonome v2</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --bg-dark: #0f0f14;
            --bg-panel: #16161e;
            --bg-editor: #1a1a24;
            --bg-input: #1e1e2a;
            --border: #2a2a3a;
            --border-active: #6366f1;
            --accent: #6366f1;
            --accent-dim: rgba(99, 102, 241, 0.15);
            --cyan: #22d3ee;
            --green: #4ade80;
            --orange: #fb923c;
            --red: #f87171;
            --yellow: #fbbf24;
            --text: #e2e8f0;
            --text-dim: #64748b;
            --markdown-color: #22d3ee;
            --html-color: #fb923c;
            --font-ui: 'Inter', system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        
        body {
            font-family: var(--font-ui);
            background: var(--bg-dark);
            color: var(--text);
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .header {
            background: var(--bg-panel);
            border-bottom: 1px solid var(--border);
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .header-left { display: flex; align-items: center; gap: 1rem; }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .logo-icon { font-size: 1.3rem; }
        
        .logo span {
            background: linear-gradient(135deg, var(--accent), var(--cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 0.1em;
        }
        
        /* Doc tabs */
        .doc-tabs {
            display: flex;
            gap: 0.25rem;
            background: var(--bg-dark);
            padding: 0.25rem;
            border-radius: 6px;
        }
        
        .doc-tab {
            padding: 0.4rem 0.75rem;
            background: transparent;
            border: none;
            border-radius: 4px;
            color: var(--text-dim);
            font-size: 0.75rem;
            font-family: var(--font-ui);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            max-width: 150px;
            position: relative;
        }
        
        .doc-tab:hover { background: var(--bg-input); color: var(--text); }
        .doc-tab.active { background: var(--accent-dim); color: var(--accent); }
        
        /* Type indicator on tab */
        .doc-tab .type-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
        .doc-tab .type-dot.md { background: var(--markdown-color); }
        .doc-tab .type-dot.html { background: var(--html-color); }
        
        .doc-tab-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .doc-tab-close { opacity: 0.5; font-size: 0.9rem; }
        .doc-tab-close:hover { opacity: 1; }
        
        .new-doc-btn {
            padding: 0.4rem 0.6rem;
            background: var(--accent-dim);
            border: 1px dashed var(--accent);
            border-radius: 4px;
            color: var(--accent);
            font-size: 0.85rem;
            cursor: pointer;
        }
        
        .new-doc-btn:hover { background: var(--accent); color: var(--bg-dark); }
        
        /* Header actions */
        .header-actions { display: flex; gap: 0.5rem; }
        
        .action-btn {
            padding: 0.4rem 0.75rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 0.75rem;
            font-family: var(--font-ui);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.35rem;
            transition: all 0.2s;
        }
        
        .action-btn:hover { border-color: var(--accent); background: var(--accent-dim); }
        .action-btn.primary { background: var(--accent); color: white; border-color: var(--accent); }
        .action-btn.primary:hover { filter: brightness(1.1); }
        
        /* Toolbar */
        .toolbar {
            background: var(--bg-panel);
            border-bottom: 1px solid var(--border);
            padding: 0.4rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
        }
        
        /* Current mode indicator */
        .mode-indicator {
            padding: 0.3rem 0.75rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        .mode-indicator.md {
            background: rgba(34, 211, 238, 0.15);
            color: var(--markdown-color);
            border: 1px solid var(--markdown-color);
        }
        .mode-indicator.html {
            background: rgba(251, 146, 60, 0.15);
            color: var(--html-color);
            border: 1px solid var(--html-color);
        }
        
        .toolbar-divider {
            width: 1px;
            height: 20px;
            background: var(--border);
            margin: 0 0.5rem;
        }
        
        .toolbar-group { display: flex; gap: 0.25rem; }
        
        .tool-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 4px;
            color: var(--text-dim);
            font-size: 0.85rem;
            font-family: var(--font-mono);
            cursor: pointer;
            transition: all 0.15s;
        }
        
        .tool-btn:hover {
            background: var(--bg-input);
            border-color: var(--border);
            color: var(--text);
        }
        
        .tool-btn.active {
            background: var(--accent-dim);
            border-color: var(--accent);
            color: var(--accent);
        }
        
        /* View buttons */
        .view-btns {
            margin-left: auto;
            display: flex;
            gap: 0.25rem;
            background: var(--bg-dark);
            padding: 0.2rem;
            border-radius: 4px;
        }
        
        .view-btn {
            padding: 0.3rem 0.6rem;
            background: transparent;
            border: none;
            border-radius: 3px;
            color: var(--text-dim);
            font-size: 0.7rem;
            font-family: var(--font-ui);
            cursor: pointer;
        }
        
        .view-btn:hover { color: var(--text); }
        .view-btn.active { background: var(--accent-dim); color: var(--accent); }
        
        /* Main layout */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        /* Sidebar */
        .sidebar {
            width: 220px;
            background: var(--bg-panel);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }
        
        .sidebar-section {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        
        .sidebar-title {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }
        
        .project-list {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .project-item {
            padding: 0.5rem 0.6rem;
            background: var(--bg-input);
            border: 1px solid transparent;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            transition: all 0.15s;
        }
        
        .project-item:hover { border-color: var(--border); }
        .project-item.active { border-color: var(--accent); background: var(--accent-dim); }
        
        .project-item .type-badge {
            font-size: 0.55rem;
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
            font-weight: 600;
        }
        .project-item .type-badge.md { background: var(--markdown-color); color: #000; }
        .project-item .type-badge.html { background: var(--html-color); color: #000; }
        
        /* Editor area */
        .editor-area {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        .editor-pane, .preview-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .editor-pane { border-right: 1px solid var(--border); }
        
        .pane-header {
            padding: 0.5rem 0.75rem;
            background: var(--bg-editor);
            border-bottom: 1px solid var(--border);
            font-size: 0.7rem;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .code-editor {
            flex: 1;
            width: 100%;
            background: var(--bg-editor);
            border: none;
            color: var(--text);
            font-family: var(--font-mono);
            font-size: 0.85rem;
            line-height: 1.6;
            padding: 1rem;
            resize: none;
            outline: none;
        }
        
        .preview-frame {
            flex: 1;
            border: none;
            background: white;
        }
        
        /* Status bar */
        .status-bar {
            background: var(--bg-panel);
            border-top: 1px solid var(--border);
            padding: 0.3rem 1rem;
            display: flex;
            justify-content: space-between;
            font-size: 0.65rem;
            color: var(--text-dim);
            flex-shrink: 0;
        }
        
        .status-left, .status-right { display: flex; gap: 1rem; }
        .status-item { display: flex; align-items: center; gap: 0.3rem; }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        
        .modal-overlay.show { display: flex; }
        
        .modal {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 85vh;
            overflow: hidden;
        }
        
        .modal-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 { font-size: 1rem; font-weight: 600; }
        .modal-close { background: none; border: none; color: var(--text-dim); font-size: 1.3rem; cursor: pointer; }
        
        .modal-body { padding: 1.25rem; overflow-y: auto; max-height: 60vh; }
        
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; font-size: 0.75rem; color: var(--text-dim); margin-bottom: 0.4rem; }
        
        .form-input {
            width: 100%;
            padding: 0.6rem 0.8rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 0.85rem;
            font-family: var(--font-ui);
            outline: none;
        }
        
        .form-input:focus { border-color: var(--accent); }
        
        /* Format selector - BIG AND CLEAR */
        .format-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .format-option {
            padding: 1.5rem;
            background: var(--bg-input);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        
        .format-option:hover { border-color: var(--text-dim); }
        
        .format-option.selected.md {
            border-color: var(--markdown-color);
            background: rgba(34, 211, 238, 0.1);
        }
        .format-option.selected.html {
            border-color: var(--html-color);
            background: rgba(251, 146, 60, 0.1);
        }
        
        .format-icon { font-size: 2.5rem; margin-bottom: 0.75rem; }
        .format-name { font-size: 1.1rem; font-weight: 700; margin-bottom: 0.25rem; }
        .format-option.md .format-name { color: var(--markdown-color); }
        .format-option.html .format-name { color: var(--html-color); }
        .format-desc { font-size: 0.7rem; color: var(--text-dim); line-height: 1.4; }
        
        /* Template grid */
        .template-section-title {
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .template-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }
        
        .template-card {
            padding: 0.75rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }
        
        .template-card:hover { border-color: var(--accent); }
        .template-card.selected { border-color: var(--accent); background: var(--accent-dim); }
        
        .template-card-icon { font-size: 1.5rem; margin-bottom: 0.3rem; }
        .template-card-name { font-size: 0.75rem; font-weight: 500; }
        
        .modal-footer {
            padding: 1rem 1.25rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }
        
        /* Export options */
        .export-options { display: flex; flex-direction: column; gap: 0.5rem; }
        
        .export-option {
            padding: 0.75rem 1rem;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: all 0.2s;
        }
        
        .export-option:hover { border-color: var(--accent); }
        
        .export-icon { font-size: 1.5rem; }
        .export-info { flex: 1; }
        .export-name { font-size: 0.85rem; font-weight: 500; }
        .export-desc { font-size: 0.7rem; color: var(--text-dim); }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-panel);
            border: 1px solid var(--accent);
            padding: 0.6rem 1.25rem;
            border-radius: 8px;
            font-size: 0.85rem;
            opacity: 0;
            transition: all 0.3s;
            z-index: 200;
        }
        
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
        
        /* View modes */
        .editor-area[data-view="editor"] .preview-pane { display: none; }
        .editor-area[data-view="preview"] .editor-pane { display: none; }
        .editor-area[data-view="split"] .editor-pane,
        .editor-area[data-view="split"] .preview-pane { display: flex; }
        
        /* Hide toolbars based on mode */
        .toolbar-md { display: none; }
        .toolbar-html { display: none; }
        body.mode-markdown .toolbar-md { display: flex; }
        body.mode-html .toolbar-html { display: flex; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-dim); }
        
        @media (max-width: 900px) { .sidebar { display: none; } }
    </style>
</head>
<body class="mode-markdown">
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                <span>FORGE</span>
            </div>
            
            <div class="doc-tabs" id="docTabs"></div>
            <button class="new-doc-btn" onclick="openNewDocModal()">+</button>
        </div>
        
        <div class="header-actions">
            <button class="action-btn" onclick="saveProject()">üíæ Sauver</button>
            <button class="action-btn" onclick="openExportModal()">üì§ Exporter</button>
        </div>
    </header>
    
    <!-- Toolbar -->
    <div class="toolbar">
        <!-- Mode indicator -->
        <div class="mode-indicator md" id="modeIndicator">üìù MARKDOWN</div>
        
        <div class="toolbar-divider"></div>
        
        <!-- MARKDOWN TOOLBAR -->
        <div class="toolbar-group toolbar-md">
            <button class="tool-btn" onclick="insertMd('**','**')" title="Gras">ùêÅ</button>
            <button class="tool-btn" onclick="insertMd('*','*')" title="Italique">ùêº</button>
            <button class="tool-btn" onclick="insertMd('~~','~~')" title="Barr√©">SÃ∂</button>
            <button class="tool-btn" onclick="insertMd('`','`')" title="Code inline">`</button>
            <div class="toolbar-divider"></div>
            <button class="tool-btn" onclick="insertMd('# ','')" title="Titre 1">H1</button>
            <button class="tool-btn" onclick="insertMd('## ','')" title="Titre 2">H2</button>
            <button class="tool-btn" onclick="insertMd('### ','')" title="Titre 3">H3</button>
            <div class="toolbar-divider"></div>
            <button class="tool-btn" onclick="insertMd('- ','')" title="Liste">‚Ä¢</button>
            <button class="tool-btn" onclick="insertMd('1. ','')" title="Liste num√©rot√©e">1.</button>
            <button class="tool-btn" onclick="insertMd('> ','')" title="Citation">‚ùù</button>
            <button class="tool-btn" onclick="insertMd('[','](url)')" title="Lien">üîó</button>
            <button class="tool-btn" onclick="insertMd('![alt](',')')" title="Image">üñºÔ∏è</button>
            <div class="toolbar-divider"></div>
            <button class="tool-btn" onclick="insertMd('```\n','\n```')" title="Bloc de code">{ }</button>
            <button class="tool-btn" onclick="insertMd('---\n','')" title="Ligne horizontale">‚Äî</button>
        </div>
        
        <!-- HTML TOOLBAR -->
        <div class="toolbar-group toolbar-html">
            <button class="tool-btn" onclick="insertHtml('<strong>','</strong>')" title="Gras">ùêÅ</button>
            <button class="tool-btn" onclick="insertHtml('<em>','</em>')" title="Italique">ùêº</button>
            <button class="tool-btn" onclick="insertHtml('<del>','</del>')" title="Barr√©">SÃ∂</button>
            <button class="tool-btn" onclick="insertHtml('<code>','</code>')" title="Code inline">`</button>
            <div class="toolbar-divider"></div>
            <button class="tool-btn" onclick="insertHtml('<h1>','</h1>')" title="Titre 1">H1</button>
            <button class="tool-btn" onclick="insertHtml('<h2>','</h2>')" title="Titre 2">H2</button>
            <button class="tool-btn" onclick="insertHtml('<h3>','</h3>')" title="Titre 3">H3</button>
            <div class="toolbar-divider"></div>
            <button class="tool-btn" onclick="insertHtml('<p>','</p>')" title="Paragraphe">¬∂</button>
            <button class="tool-btn" onclick="insertHtml('<ul>\n  <li>','</li>\n</ul>')" title="Liste">‚Ä¢</button>
            <button class="tool-btn" onclick="insertHtml('<blockquote>','</blockquote>')" title="Citation">‚ùù</button>
            <button class="tool-btn" onclick="insertHtml('<a href=\"\">','</a>')" title="Lien">üîó</button>
            <button class="tool-btn" onclick="insertHtml('<img src=\"\" alt=\"','\"/>')" title="Image">üñºÔ∏è</button>
            <div class="toolbar-divider"></div>
            <button class="tool-btn" onclick="insertHtml('<div>','</div>')" title="Div">‚òê</button>
            <button class="tool-btn" onclick="insertHtml('<span>','</span>')" title="Span">‚ñ≠</button>
            <button class="tool-btn" onclick="insertHtml('<br>','')" title="Saut ligne">‚Üµ</button>
            <button class="tool-btn" onclick="insertHtml('<hr>','')" title="Ligne">‚Äî</button>
        </div>
        
        <div class="view-btns">
            <button class="view-btn active" data-view="split" onclick="setView('split')">Split</button>
            <button class="view-btn" data-view="editor" onclick="setView('editor')">Code</button>
            <button class="view-btn" data-view="preview" onclick="setView('preview')">Preview</button>
        </div>
    </div>
    
    <!-- Main container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">üìÅ Documents</div>
                <div class="project-list" id="projectsList"></div>
            </div>
            
            <div class="sidebar-section" style="border-bottom:none;flex:1;">
                <div class="sidebar-title">‚ÑπÔ∏è Aide</div>
                <div style="font-size:0.7rem;color:var(--text-dim);line-height:1.5">
                    <p style="margin-bottom:0.5rem"><strong style="color:var(--markdown-color)">Markdown</strong> : syntaxe simplifi√©e pour r√©diger du contenu textuel.</p>
                    <p><strong style="color:var(--html-color)">HTML</strong> : code complet pour pages web avec styles et mise en forme avanc√©e.</p>
                </div>
            </div>
        </aside>
        
        <!-- Editor area -->
        <div class="editor-area" id="editorArea" data-view="split">
            <div class="editor-pane">
                <div class="pane-header">
                    <span id="editorModeLabel">üìù √âditeur Markdown</span>
                </div>
                <textarea class="code-editor" id="codeEditor" spellcheck="false" placeholder="Commencez √† √©crire..."></textarea>
            </div>
            
            <div class="preview-pane">
                <div class="pane-header">
                    <span>üëÅÔ∏è Aper√ßu</span>
                    <button style="margin-left:auto;background:none;border:none;color:var(--text-dim);cursor:pointer;font-size:0.7rem" onclick="refreshPreview()">üîÑ Rafra√Æchir</button>
                </div>
                <iframe class="preview-frame" id="previewFrame"></iframe>
            </div>
        </div>
    </div>
    
    <!-- Status bar -->
    <div class="status-bar">
        <div class="status-left">
            <span class="status-item" id="statusMode">üìù Markdown</span>
            <span class="status-item" id="statusChars">0 caract√®res</span>
            <span class="status-item" id="statusLines">0 lignes</span>
        </div>
        <div class="status-right">
            <span class="status-item" id="statusSaved">üíæ Sauvegard√©</span>
            <span class="status-item" id="statusTime">--:--</span>
        </div>
    </div>
    
    <!-- New Doc Modal -->
    <div class="modal-overlay" id="newDocModal">
        <div class="modal">
            <div class="modal-header">
                <h3>üìÑ Nouveau Document</h3>
                <button class="modal-close" onclick="closeModal('newDocModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nom du document</label>
                    <input type="text" class="form-input" id="newDocName" placeholder="Mon document">
                </div>
                
                <!-- FORMAT SELECTOR - BIG AND CLEAR -->
                <div class="form-group">
                    <label class="form-label">Format du document</label>
                    <div class="format-selector">
                        <div class="format-option md selected" data-format="markdown" onclick="selectFormat('markdown')">
                            <div class="format-icon">üìù</div>
                            <div class="format-name">MARKDOWN</div>
                            <div class="format-desc">Syntaxe simple pour r√©diger du contenu. Id√©al pour articles, notes, documentation.</div>
                        </div>
                        <div class="format-option html" data-format="html" onclick="selectFormat('html')">
                            <div class="format-icon">üåê</div>
                            <div class="format-name">HTML</div>
                            <div class="format-desc">Code complet pour pages web. Contr√¥le total sur le style et la structure.</div>
                        </div>
                    </div>
                </div>
                
                <!-- Templates based on format -->
                <div id="templateSection">
                    <div class="template-section-title">Choisir un mod√®le</div>
                    <div class="template-grid" id="templateGrid"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn" onclick="closeModal('newDocModal')">Annuler</button>
                <button class="action-btn primary" onclick="createNewDoc()">Cr√©er</button>
            </div>
        </div>
    </div>
    
    <!-- Export Modal -->
    <div class="modal-overlay" id="exportModal">
        <div class="modal">
            <div class="modal-header">
                <h3>üì§ Exporter</h3>
                <button class="modal-close" onclick="closeModal('exportModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <div class="export-option" onclick="exportAs('source')">
                        <div class="export-icon">üìÑ</div>
                        <div class="export-info">
                            <div class="export-name">Fichier source</div>
                            <div class="export-desc" id="exportSourceDesc">.md ou .html selon le format</div>
                        </div>
                    </div>
                    <div class="export-option" onclick="exportAs('html')">
                        <div class="export-icon">üåê</div>
                        <div class="export-info">
                            <div class="export-name">Page HTML compl√®te</div>
                            <div class="export-desc">Fichier .html pr√™t √† publier</div>
                        </div>
                    </div>
                    <div class="export-option" onclick="exportAs('preview')">
                        <div class="export-icon">üîç</div>
                        <div class="export-info">
                            <div class="export-name">Ouvrir dans nouvel onglet</div>
                            <div class="export-desc">Pr√©visualiser en plein √©cran</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast"></div>
    
<script>
// ==================== STATE ====================
let projects = [];
let currentProject = null;
let hasUnsavedChanges = false;
let selectedFormat = 'markdown';
let selectedTemplate = 'blank';

// ==================== TEMPLATES ====================
const templates = {
    markdown: {
        blank: { name: 'Vide', icon: 'üìÑ', content: '# Titre\n\nVotre contenu ici...\n' },
        article: { name: 'Article', icon: 'üì∞', content: `# Titre de l'article

*Publi√© le [date] par [auteur]*

## Introduction

Votre introduction ici...

## Premi√®re partie

D√©veloppez votre premier point...

> Une citation pertinente

## Deuxi√®me partie

Continuez votre d√©veloppement...

## Conclusion

R√©sumez et ouvrez sur une perspective...

---

**Tags:** #tag1 #tag2 #tag3
` },
        notes: { name: 'Notes', icon: 'üìù', content: `# Notes de r√©union

**Date:** [date]
**Participants:** [noms]

## Ordre du jour

1. Point 1
2. Point 2
3. Point 3

## Discussions

### Point 1

- Discussion...
- D√©cision...

### Point 2

- Discussion...
- D√©cision...

## Actions √† suivre

- [ ] Action 1 - Responsable - Deadline
- [ ] Action 2 - Responsable - Deadline

## Prochaine r√©union

[date et heure]
` },
        lettre: { name: 'Lettre', icon: '‚úâÔ∏è', content: `[Ville], le [date]

**√Ä l'attention de [Destinataire]**
[Fonction]
[Adresse]

---

Madame/Monsieur,

[Introduction : contexte et objet de la lettre]

[D√©veloppement : arguments, faits, demandes]

[Conclusion : r√©sum√© et attentes]

Dans l'attente de votre r√©ponse, je vous prie d'agr√©er, Madame/Monsieur, l'expression de mes salutations distingu√©es.

**[Signature]**
[Nom]
[Contact]
` },
        communique: { name: 'Communiqu√©', icon: 'üì¢', content: `# COMMUNIQU√â DE PRESSE

**Pour diffusion imm√©diate**
[Ville], le [date]

---

## [Titre accrocheur]

**[Chapeau : r√©sum√© en 2-3 lignes]**

[Premier paragraphe : les faits principaux - Qui, Quoi, Quand, O√π, Pourquoi]

[Deuxi√®me paragraphe : contexte et enjeux]

> ¬´ [Citation d'un porte-parole] ¬ª
> ‚Äî [Nom], [fonction]

[Troisi√®me paragraphe : prochaines √©tapes, demandes]

---

**Contact presse :**
[Nom] - [Email] - [T√©l√©phone]
` }
    },
    html: {
        blank: { name: 'Vide', icon: 'üìÑ', content: `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon document</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <h1>Titre</h1>
    <p>Votre contenu ici...</p>
</body>
</html>` },
        landing: { name: 'Landing', icon: 'üåê', content: `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landing Page</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: system-ui, sans-serif;
            line-height: 1.6;
            color: #333;
        }
        .hero {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
        }
        .hero h1 { font-size: 3rem; margin-bottom: 1rem; }
        .hero p { font-size: 1.25rem; opacity: 0.9; max-width: 600px; margin-bottom: 2rem; }
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: white;
            color: #667eea;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            transition: transform 0.2s;
        }
        .btn:hover { transform: scale(1.05); }
        .section {
            padding: 4rem 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        .section h2 { text-align: center; margin-bottom: 2rem; }
    </style>
</head>
<body>
    <section class="hero">
        <div>
            <h1>Votre Titre Principal</h1>
            <p>Une description accrocheuse qui explique votre proposition de valeur en une phrase.</p>
            <a href="#" class="btn">Appel √† l'action</a>
        </div>
    </section>
    
    <section class="section">
        <h2>Pourquoi nous ?</h2>
        <p>D√©veloppez vos arguments ici...</p>
    </section>
</body>
</html>` },
        tract: { name: 'Tract', icon: 'üì¢', content: `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Tract</title>
    <style>
        @page { size: A5; margin: 10mm; }
        body {
            font-family: system-ui, sans-serif;
            max-width: 148mm;
            margin: 0 auto;
            padding: 15px;
            line-height: 1.4;
            font-size: 11pt;
        }
        .header {
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px solid #333;
            margin-bottom: 15px;
        }
        .org-name { font-size: 0.9rem; color: #666; }
        h1 {
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: 10px 0;
        }
        .highlight {
            background: #ffeb3b;
            padding: 15px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
            font-size: 1.1rem;
        }
        .cta {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #333;
            color: white;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="org-name">COLLECTIF CITOYEN</div>
        <h1>Titre du tract</h1>
    </div>
    
    <p><strong>Accroche :</strong> Une phrase choc qui interpelle.</p>
    
    <div class="highlight">
        MESSAGE CL√â √Ä RETENIR
    </div>
    
    <p>D√©veloppez votre message principal en quelques lignes...</p>
    
    <div class="cta">
        <strong>REJOIGNEZ-NOUS !</strong><br>
        contact@exemple.be
    </div>
</body>
</html>` },
        email: { name: 'Email', icon: '‚úâÔ∏è', content: `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Email Template</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .email-container {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            background: #333;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .content {
            padding: 30px;
            line-height: 1.6;
        }
        .button {
            display: inline-block;
            padding: 12px 30px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 20px 0;
        }
        .footer {
            padding: 20px;
            text-align: center;
            font-size: 0.85rem;
            color: #666;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>
    <div class="email-container">
        <div class="header">
            <h1>Nom de l'organisation</h1>
        </div>
        <div class="content">
            <p>Bonjour [Pr√©nom],</p>
            <p>Votre message principal ici...</p>
            <p style="text-align:center">
                <a href="#" class="button">Appel √† l'action</a>
            </p>
            <p>Cordialement,<br>L'√©quipe</p>
        </div>
        <div class="footer">
            ¬© 2025 Organisation ‚Ä¢ <a href="#">Se d√©sinscrire</a>
        </div>
    </div>
</body>
</html>` }
    }
};

// ==================== INIT ====================
document.addEventListener('DOMContentLoaded', () => {
    loadProjects();
    renderProjects();
    renderTabs();
    updateClock();
    setInterval(updateClock, 1000);
    updateTemplateGrid();
    
    const editor = document.getElementById('codeEditor');
    editor.addEventListener('input', onEditorChange);
    editor.addEventListener('keydown', handleEditorKeys);
    
    if (projects.length === 0) {
        createProject('Mon premier document', 'markdown', 'blank');
    }
});

// ==================== PROJECTS ====================
function loadProjects() {
    const saved = localStorage.getItem('forgeProjects_v2');
    projects = saved ? JSON.parse(saved) : [];
}

function saveProjects() {
    localStorage.setItem('forgeProjects_v2', JSON.stringify(projects));
}

function createProject(name, format, templateKey) {
    const tpl = templates[format][templateKey] || templates[format].blank;
    const project = {
        id: Date.now().toString(36),
        name: name || 'Sans titre',
        format: format, // 'markdown' or 'html' - LOCKED per document
        template: templateKey,
        content: tpl.content,
        created: new Date().toISOString(),
        modified: new Date().toISOString()
    };
    
    projects.push(project);
    saveProjects();
    
    currentProject = project;
    loadProjectInEditor(project);
    renderProjects();
    renderTabs();
    
    return project;
}

function loadProjectInEditor(project) {
    document.getElementById('codeEditor').value = project.content;
    
    // Set UI to match document format
    setEditorMode(project.format);
    
    updatePreview();
    updateStats();
    hasUnsavedChanges = false;
    updateSaveStatus();
}

function setEditorMode(format) {
    // Update body class for toolbar visibility
    document.body.classList.remove('mode-markdown', 'mode-html');
    document.body.classList.add('mode-' + format);
    
    // Update mode indicator
    const indicator = document.getElementById('modeIndicator');
    indicator.className = 'mode-indicator ' + (format === 'markdown' ? 'md' : 'html');
    indicator.textContent = format === 'markdown' ? 'üìù MARKDOWN' : 'üåê HTML';
    
    // Update editor label
    document.getElementById('editorModeLabel').textContent = 
        format === 'markdown' ? 'üìù √âditeur Markdown' : 'üåê √âditeur HTML';
    
    // Update status bar
    document.getElementById('statusMode').textContent = 
        format === 'markdown' ? 'üìù Markdown' : 'üåê HTML';
}

function renderProjects() {
    const container = document.getElementById('projectsList');
    
    if (projects.length === 0) {
        container.innerHTML = '<div style="padding:0.5rem;font-size:0.75rem;color:var(--text-dim)">Aucun projet</div>';
        return;
    }
    
    container.innerHTML = projects.map(p => `
        <div class="project-item ${currentProject?.id === p.id ? 'active' : ''}" onclick="switchProject('${p.id}')">
            <span class="type-badge ${p.format === 'markdown' ? 'md' : 'html'}">${p.format === 'markdown' ? 'MD' : 'HTML'}</span>
            <span style="flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${p.name}</span>
        </div>
    `).join('');
}

function renderTabs() {
    const container = document.getElementById('docTabs');
    container.innerHTML = projects.slice(0, 5).map(p => `
        <button class="doc-tab ${currentProject?.id === p.id ? 'active' : ''}" onclick="switchProject('${p.id}')">
            <span class="type-dot ${p.format === 'markdown' ? 'md' : 'html'}"></span>
            <span class="doc-tab-name">${p.name}</span>
            <span class="doc-tab-close" onclick="event.stopPropagation();deleteProject('${p.id}')">√ó</span>
        </button>
    `).join('');
}

function switchProject(id) {
    if (hasUnsavedChanges && currentProject) {
        currentProject.content = document.getElementById('codeEditor').value;
        currentProject.modified = new Date().toISOString();
        saveProjects();
    }
    
    const project = projects.find(p => p.id === id);
    if (project) {
        currentProject = project;
        loadProjectInEditor(project);
        renderProjects();
        renderTabs();
    }
}

function deleteProject(id) {
    if (!confirm('Supprimer ce document ?')) return;
    projects = projects.filter(p => p.id !== id);
    saveProjects();
    
    if (currentProject?.id === id) {
        currentProject = projects[0] || null;
        if (currentProject) loadProjectInEditor(currentProject);
        else document.getElementById('codeEditor').value = '';
    }
    
    renderProjects();
    renderTabs();
    showToast('üóëÔ∏è Document supprim√©');
}

function saveProject() {
    if (!currentProject) return;
    currentProject.content = document.getElementById('codeEditor').value;
    currentProject.modified = new Date().toISOString();
    saveProjects();
    hasUnsavedChanges = false;
    updateSaveStatus();
    showToast('üíæ Sauvegard√©');
}

// ==================== EDITOR ====================
function onEditorChange() {
    hasUnsavedChanges = true;
    updateSaveStatus();
    updatePreview();
    updateStats();
}

function handleEditorKeys(e) {
    if (e.key === 'Tab') {
        e.preventDefault();
        const editor = e.target;
        const start = editor.selectionStart;
        const end = editor.selectionEnd;
        editor.value = editor.value.substring(0, start) + '  ' + editor.value.substring(end);
        editor.selectionStart = editor.selectionEnd = start + 2;
        onEditorChange();
    }
    
    if (e.ctrlKey && e.key === 's') {
        e.preventDefault();
        saveProject();
    }
}

// Insert for Markdown
function insertMd(before, after) {
    if (currentProject?.format !== 'markdown') return;
    insertText(before, after);
}

// Insert for HTML
function insertHtml(before, after) {
    if (currentProject?.format !== 'html') return;
    insertText(before, after);
}

function insertText(before, after) {
    const editor = document.getElementById('codeEditor');
    const start = editor.selectionStart;
    const end = editor.selectionEnd;
    const selected = editor.value.substring(start, end);
    
    editor.value = editor.value.substring(0, start) + before + selected + after + editor.value.substring(end);
    editor.selectionStart = start + before.length;
    editor.selectionEnd = start + before.length + selected.length;
    editor.focus();
    
    onEditorChange();
}

function setView(view) {
    document.getElementById('editorArea').dataset.view = view;
    document.querySelectorAll('.view-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.view === view);
    });
}

// ==================== PREVIEW ====================
function updatePreview() {
    const content = document.getElementById('codeEditor').value;
    const frame = document.getElementById('previewFrame');
    
    if (!currentProject) {
        frame.srcdoc = '';
        return;
    }
    
    let html = content;
    
    // If markdown, convert to HTML
    if (currentProject.format === 'markdown') {
        html = markdownToHtml(content);
        // Wrap in basic HTML
        html = `<!DOCTYPE html>
<html><head><meta charset="UTF-8"><style>
body { font-family: system-ui, sans-serif; padding: 30px; line-height: 1.7; max-width: 800px; margin: 0 auto; color: #333; }
h1, h2, h3, h4 { margin-top: 1.5em; margin-bottom: 0.5em; color: #111; }
h1 { font-size: 2rem; border-bottom: 2px solid #eee; padding-bottom: 0.3em; }
h2 { font-size: 1.5rem; }
h3 { font-size: 1.25rem; }
p { margin-bottom: 1em; }
code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: monospace; }
pre { background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto; }
pre code { background: none; padding: 0; }
blockquote { border-left: 4px solid #ddd; margin: 1em 0; padding: 0.5em 1em; color: #666; background: #f9f9f9; }
ul, ol { margin-bottom: 1em; padding-left: 2em; }
li { margin-bottom: 0.3em; }
a { color: #0066cc; }
hr { border: none; border-top: 1px solid #ddd; margin: 2em 0; }
img { max-width: 100%; border-radius: 5px; }
</style></head><body>${html}</body></html>`;
    } else {
        // HTML mode - if not a full document, wrap it
        if (!html.includes('<!DOCTYPE') && !html.includes('<html')) {
            html = `<!DOCTYPE html>
<html><head><meta charset="UTF-8"><style>
body { font-family: system-ui, sans-serif; padding: 30px; line-height: 1.6; }
</style></head><body>${html}</body></html>`;
        }
    }
    
    frame.srcdoc = html;
}

function markdownToHtml(md) {
    let html = md
        // Code blocks (before other processing)
        .replace(/```(\w*)\n([\s\S]*?)```/g, '<pre><code class="language-$1">$2</code></pre>')
        // Headers
        .replace(/^#### (.*$)/gim, '<h4>$1</h4>')
        .replace(/^### (.*$)/gim, '<h3>$1</h3>')
        .replace(/^## (.*$)/gim, '<h2>$1</h2>')
        .replace(/^# (.*$)/gim, '<h1>$1</h1>')
        // Bold & Italic
        .replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>')
        .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.+?)\*/g, '<em>$1</em>')
        .replace(/_(.+?)_/g, '<em>$1</em>')
        // Strikethrough
        .replace(/~~(.+?)~~/g, '<del>$1</del>')
        // Inline code
        .replace(/`([^`]+)`/g, '<code>$1</code>')
        // Images (before links)
        .replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">')
        // Links
        .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>')
        // Blockquotes
        .replace(/^> (.*$)/gim, '<blockquote>$1</blockquote>')
        // HR
        .replace(/^---$/gim, '<hr>')
        .replace(/^\*\*\*$/gim, '<hr>')
        // Unordered lists
        .replace(/^\- (.*$)/gim, '<li>$1</li>')
        .replace(/^\* (.*$)/gim, '<li>$1</li>')
        // Ordered lists
        .replace(/^\d+\. (.*$)/gim, '<li>$1</li>')
        // Checkboxes
        .replace(/\- \[ \] (.*$)/gim, '<li>‚òê $1</li>')
        .replace(/\- \[x\] (.*$)/gim, '<li>‚òë $1</li>');
    
    // Wrap consecutive <li> in <ul>
    html = html.replace(/(<li>.*<\/li>\n?)+/g, '<ul>$&</ul>');
    
    // Paragraphs
    html = html.split('\n\n').map(block => {
        block = block.trim();
        if (!block) return '';
        if (block.startsWith('<h') || block.startsWith('<ul') || block.startsWith('<ol') || 
            block.startsWith('<blockquote') || block.startsWith('<pre') || block.startsWith('<hr')) {
            return block;
        }
        return '<p>' + block.replace(/\n/g, '<br>') + '</p>';
    }).join('\n');
    
    // Fix multiple blockquotes
    html = html.replace(/<\/blockquote>\s*<blockquote>/g, '<br>');
    
    return html;
}

function refreshPreview() {
    updatePreview();
    showToast('üîÑ Aper√ßu rafra√Æchi');
}

// ==================== STATS ====================
function updateStats() {
    const content = document.getElementById('codeEditor').value;
    document.getElementById('statusChars').textContent = content.length + ' caract√®res';
    document.getElementById('statusLines').textContent = content.split('\n').length + ' lignes';
}

function updateSaveStatus() {
    document.getElementById('statusSaved').textContent = hasUnsavedChanges ? '‚ö†Ô∏è Non sauvegard√©' : 'üíæ Sauvegard√©';
}

function updateClock() {
    document.getElementById('statusTime').textContent = new Date().toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
}

// ==================== MODALS ====================
function openNewDocModal() {
    document.getElementById('newDocName').value = '';
    selectedFormat = 'markdown';
    selectedTemplate = 'blank';
    
    document.querySelectorAll('.format-option').forEach(opt => {
        opt.classList.toggle('selected', opt.dataset.format === selectedFormat);
    });
    
    updateTemplateGrid();
    document.getElementById('newDocModal').classList.add('show');
}

function selectFormat(format) {
    selectedFormat = format;
    selectedTemplate = 'blank';
    
    document.querySelectorAll('.format-option').forEach(opt => {
        opt.classList.toggle('selected', opt.dataset.format === format);
    });
    
    updateTemplateGrid();
}

function updateTemplateGrid() {
    const grid = document.getElementById('templateGrid');
    const tpls = templates[selectedFormat];
    
    grid.innerHTML = Object.entries(tpls).map(([key, tpl]) => `
        <div class="template-card ${selectedTemplate === key ? 'selected' : ''}" data-template="${key}" onclick="selectTemplate('${key}')">
            <div class="template-card-icon">${tpl.icon}</div>
            <div class="template-card-name">${tpl.name}</div>
        </div>
    `).join('');
}

function selectTemplate(template) {
    selectedTemplate = template;
    document.querySelectorAll('.template-card').forEach(c => {
        c.classList.toggle('selected', c.dataset.template === template);
    });
}

function createNewDoc() {
    const name = document.getElementById('newDocName').value.trim() || 'Sans titre';
    createProject(name, selectedFormat, selectedTemplate);
    closeModal('newDocModal');
    showToast('üìÑ Document cr√©√© en ' + (selectedFormat === 'markdown' ? 'Markdown' : 'HTML'));
}

function closeModal(id) {
    document.getElementById(id).classList.remove('show');
}

// ==================== EXPORT ====================
function openExportModal() {
    if (!currentProject) {
        showToast('‚ùå Aucun document s√©lectionn√©');
        return;
    }
    
    document.getElementById('exportSourceDesc').textContent = 
        currentProject.format === 'markdown' ? 'Fichier .md (Markdown)' : 'Fichier .html (HTML)';
    
    document.getElementById('exportModal').classList.add('show');
}

function exportAs(type) {
    if (!currentProject) return;
    
    const content = document.getElementById('codeEditor').value;
    let blob, filename;
    
    switch(type) {
        case 'source':
            const ext = currentProject.format === 'markdown' ? 'md' : 'html';
            blob = new Blob([content], { type: 'text/plain' });
            filename = `${currentProject.name}.${ext}`;
            break;
            
        case 'html':
            let htmlContent = content;
            if (currentProject.format === 'markdown') {
                const converted = markdownToHtml(content);
                htmlContent = `<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${currentProject.name}</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto; padding: 2rem; line-height: 1.7; color: #333; }
        h1, h2, h3 { margin-top: 1.5em; }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; }
        pre { background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto; }
        blockquote { border-left: 4px solid #ddd; margin: 1em 0; padding: 0.5em 1em; color: #666; }
    </style>
</head>
<body>
${converted}
</body>
</html>`;
            }
            blob = new Blob([htmlContent], { type: 'text/html' });
            filename = `${currentProject.name}.html`;
            break;
            
        case 'preview':
            let previewHtml = content;
            if (currentProject.format === 'markdown') {
                previewHtml = `<!DOCTYPE html><html><head><meta charset="UTF-8"><style>
body { font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto; padding: 2rem; line-height: 1.7; }
</style></head><body>${markdownToHtml(content)}</body></html>`;
            }
            const url = URL.createObjectURL(new Blob([previewHtml], { type: 'text/html' }));
            window.open(url, '_blank');
            closeModal('exportModal');
            return;
    }
    
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    a.click();
    
    closeModal('exportModal');
    showToast('üì• ' + filename + ' t√©l√©charg√©');
}

// ==================== UTILS ====================
function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2500);
}
</script>
</body>
</html>
